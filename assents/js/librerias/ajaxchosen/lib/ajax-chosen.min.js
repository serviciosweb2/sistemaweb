(function(){(function(a){return a.fn.ajaxChosen=function(B,C){var y,v,b,c,w,r,x,f,D=this;b={minLength:3,queryLimit:10,delay:100,chosenOptions:{},searchingText:"Searching...",noresultsText:"No results.",initialQuery:false};a.extend(b,B);b.chosenOptions.no_results_text=b.searchingText;f=this;if(r=f.attr("multiple")!=null){w=".search-field > input";y=".chzn-choices"}else{w=".chzn-search > input";y=".chzn-single"}f.chosen(b.chosenOptions);v=f.next(".chzn-container");c=v.find(w);b.initialQuery&&c.bind("focus",
function(j){if(!(this.previousSearch||!v.hasClass("chzn-container-active")))return x(j)});c.bind("keyup",function(j){this.previousSearch&&clearTimeout(this.previousSearch);return this.previousSearch=setTimeout(function(){return x(j)},b.delay)});return x=function(j){var s,m,z,q;q=a.trim(c.attr("value"));z=(s=c.data("prevVal"))!=null?s:false;c.data("prevVal",q);s=function(){return(r?c.parent().parent().siblings():c.parent().parent()).find(".no-results").html(b.noresultsText+" '"+a(D).attr("value")+
"'")};if(q===z||q.length<b.minLength&&j.type==="keyup"){s();return false}m=f.find("option");b.term=q;return C(b,function(t,A){var g,n,h,i,u;if(!(!c.is(":focus")&&j.type==="keyup")){n=[];a.each(t,function(o,d){var e;e=a("<option>");e.attr("value",o).html(d);return n.push(a(e))});h=function(o){var d,e;d=a(o);if(!(d.attr("selected")&&r))if(!(d.attr("value")===""&&d.html()===""&&!r))if(function(){var k,l,p;p=[];k=0;for(l=n.length;k<l;k++){e=n[k];e.attr("value")===d.attr("value")&&p.push(e)}return p}().length===
0)return d.remove()};i=0;for(u=m.length;i<u;i++){g=m[i];h(g)}m=f.find("option");h=function(o){var d,e,k,l,p;e=false;k=function(E){if(a(E).attr("value")===o.attr("value"))return e=true};l=0;for(p=m.length;l<p;l++){d=m[l];k(d)}if(!e)return f.append(o)};i=0;for(u=n.length;i<u;i++){g=n[i];h(g)}g=c.val();if(a.isEmptyObject(t)){h=a("<option>");h.addClass("no-results");h.html(b.noresultsText+" '"+g+"'").attr("value","");f.append(h)}else f.change();f.trigger("liszt:updated");a(".no-results").removeClass("active-result");
c.val(g);if(!a.isEmptyObject(t)){g=a.Event("keydown");g.which=40;c.trigger(g)}if(A)return A(t)}},j)}}})(jQuery)}).call(this);
